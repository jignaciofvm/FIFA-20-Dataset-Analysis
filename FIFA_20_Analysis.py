import streamlit as st
import pandas as pd
from sklearn.preprocessing import StandardScaler
from scipy.spatial import distance
from pathlib import Path
import pickle

st.set_page_config(layout="wide")
header = st.beta_container()
dataset = st.beta_container()
recommender = st.beta_container()
model = st.beta_container()


with header:
    st.title('FIFA 20 Analysis - Jose Ignacio Fdez')
    st.text("""
        ES: En este proyecto presentamos, por un lado, un sistema de recomendación de jugadores y, por otro, un modelo de predicción del valor de un futbolista en 
        el mercado en función de sus características

        EN: In this project we present a player recommendation system and a prediction model of the player's value in the market based on its characteristics
         """)

with dataset:
    st.header('FIFA 20 Dataset')
    st.text("""
        ES: El conjunto de datos empleado se ha obtenido de Kaggle y consta de un total de 18.000 futbolistas y 75 variables.

        EN: The dataset used was obtained from Kaggle and consists of 18,000 players and 75 variables.
    """)
    
    fifa_dataset = Path(__file__).parents[0] / 'files/fifa20_data.csv'
    fifa_similarity = Path(__file__).parents[0] / 'files/df_similarity.csv'
     
    df = pd.read_csv(fifa_dataset, engine='python', encoding='utf8')
    df_similarity = pd.read_csv(fifa_similarity, engine='python', encoding='utf8')
    st.write(df.head())
    st.text("""
        ES: Comentar que el dataset anterior ha sido tratado. Si quiere seguir el proyecto, acuda a mi [Github](https://github.com/jignaciofvm)
        EN: Please note that the previous dataset has been processed. If you want to follow the project, go to my [Github](https://github.com/jignaciofvm)
        """)

with recommender:
    st.header('Recommender System')
    st.text("""
            ES: Por favor, selecciona al jugador para el que desea encontrar sustituto
            EN: Please, choose player for whom you want to find a replacement""")
    sel_col,disp_col = st.beta_columns(2)
    player = sel_col.selectbox('Player', options = ['Lionel Messi',
 'C. Ronaldo dos Santos Aveiro','Neymar da Silva Santos Jr.','Jan Oblak','Kevin De Bruyne','Eden Hazard','Mohamed Salah','Virgil van Dijk','Marc-André ter Stegen','Luka Modrić','Kylian Mbappé',
 "N'Golo Kanté",'Alisson Ramses Becker','Harry Kane','Kalidou Koulibaly','Antoine Griezmann','David De Gea Quintana','Sergio Busquets Burgos','Robert Lewandowski','Luis Suárez',
 'Sergio Ramos García','Sergio Agüero','Giorgio Chiellini','Paulo Dybala','Ederson Santana de Moraes','Sadio Mané','Raheem Sterling','Paul Pogba','Thibaut Courtois','Christian Eriksen',
 'Pierre-Emerick Aubameyang','Marco Reus','Toni Kroos','Diego Godín','Edinson Cavani','David Josué Jiménez Silva','Hugo Lloris','Manuel Neuer','Samir Handanovič','Gerard Piqué Bernabeu'],
 index = 0)
    num_players = disp_col.selectbox('# of Players', options = [5, 10, 15, 20, 50], index = 0)

X = df_similarity.drop(['Name','Overall', 'Value'], axis = 1)
std=StandardScaler()
X=std.fit_transform(X)
sn=df_similarity["Name"].to_list()
sv=df_similarity["Value"].to_list()
so = df_similarity['Overall'].to_list()
sf = df_similarity['foot'].to_list()
sp = df_similarity['PAC'].to_list()
ss = df_similarity['SHO'].to_list()
spp = df_similarity['PAS'].to_list()
sd = df_similarity['DRI'].to_list()
sdd = df_similarity['DEF'].to_list()
sph = df_similarity['PHY'].to_list()

def similaridad (nombre, num_jugadores):
  p_ind=df_similarity[df_similarity["Name"]==nombre].index[0] # Indice del nombre del jugador
  cossim=[]
  for i in range (0,len(X)): # Recorremos el dataframe
      cossim.append(1 - distance.cosine(X[p_ind],X[i])) # Restamos uno para obtener el valor
  pd.Series(cossim)
  sim2={"Name":sn,"cossim":cossim, 'Value': sv, 'Overall': so, 'foot':sf, 'PAC': sp, 'SHO': ss, 'PAS': spp, 'DRI': sd, 'DEF': sdd, 'PHY': sph}
  sim2=pd.DataFrame(sim2)
  # Para transformar de nuevo la variable foot a Right or Left
  sim2['foot'] = sim2['foot'].apply(lambda x: 'Right' if x ==0 else 'Left')
  similarity = sim2.iloc[sim2["cossim"].sort_values(ascending=False).index].head(num_jugadores+1)
  sim_df = similarity.drop('cossim',axis = 1)
  sim_df['Value'] = sim_df['Value'].map('€{:,.2f}'.format)
  sim_df = sim_df.reset_index(drop=True)
  return sim_df.iloc[1:,:]

st.write(similaridad(player, num_players))



with model:
    st.header("What is my player's value?")
    st.text("""
            ES: Si desea saber el valor de su jugador en el mercado, solamente necesita indicar los siguientes atributos.
            EN: If you want to know the market value of your player, you only need to indicate the following attributes.
            """)

    a, b= st.beta_columns(2)
    age = a.slider("Edad del jugador / Player's Age", min_value = 16, max_value = 42, value = 20, step = 1)
    position_fe = a.selectbox('Posición / Position', options = ['delantero', 'mediocentro', 'defensa', 'portero'])
    IR = a.selectbox('Reconocimiento Internacional / International Recognition', options = [1,2,3,4,5])
    SHO = a.slider("Capacidad de tiro / Shooting Ability", min_value = 0, max_value = 100, value = 50, step = 1)
    PAS = a.slider("Capacidad de pase / Passing Ability", min_value = 0, max_value = 100, value = 50, step = 1)
    DRI = b.slider("Capacidad de regate / Dribiling Ability", min_value = 0, max_value = 100, value = 50, step = 1)
    DEF = b.slider("Capacidad defensiva / Defense Ability", min_value = 0, max_value = 100, value = 50, step = 1)
    PHY = b.slider("Capacidad física / Physical Ability", min_value = 0, max_value = 100, value = 50, step = 1)
    PAC = b.slider("Velocidad / Pace", min_value = 0, max_value = 100, value = 50, step = 1)
    Club = b.selectbox("Club / club", options = ['FC Barcelona',
                                                                         'Juventus',
                                                                         'Paris Saint-Germain',
                                                                         'Atlético Madrid',
                                                                         'Manchester City',
                                                                         'Real Madrid',
                                                                         'Liverpool',
                                                                         'Chelsea',
                                                                         'Tottenham Hotspur',
                                                                         'Napoli',
                                                                         'Manchester United',
                                                                         'FC Bayern München',
                                                                         'Arsenal',
                                                                         'Borussia Dortmund',
                                                                         'Inter',
                                                                         'Lazio',
                                                                         'Valencia CF',
                                                                         'Milan',
                                                                         'Sporting CP',
                                                                         'Ajax',
                                                                         'Olympique Lyonnais',
                                                                         'RC Celta',
                                                                         'RB Leipzig',
                                                                         'Atalanta',
                                                                         'LA Galaxy',
                                                                         'SV Werder Bremen',
                                                                         'Bayer 04 Leverkusen',
                                                                         'Real Betis',
                                                                         'FC Porto',
                                                                         'West Ham United',
                                                                         'SL Benfica',
                                                                         'Guangzhou Evergrande Taobao FC',
                                                                         'Roma',
                                                                         'Borussia Mönchengladbach',
                                                                         'Dalian YiFang FC',
                                                                         'Torino',
                                                                         'AS Saint-Étienne',
                                                                         'Wolverhampton Wanderers',
                                                                         'Grêmio',
                                                                         'Atlético Mineiro',
                                                                         'Getafe CF',
                                                                         'TSG 1899 Hoffenheim',
                                                                         'Medipol Başakşehir FK',
                                                                         'Olympique de Marseille',
                                                                         'Everton',
                                                                         'AS Monaco',
                                                                         'Crystal Palace',
                                                                         'VfL Wolfsburg',
                                                                         'Real Sociedad',
                                                                         'Eintracht Frankfurt',
                                                                         'Shanghai SIPG FC',
                                                                         'Fenerbahçe SK',
                                                                         'Sevilla FC',
                                                                         'Cagliari',
                                                                         'Los Angeles FC',
                                                                         'Jiangsu Suning FC',
                                                                         'Galatasaray SK',
                                                                         'Leicester City',
                                                                         'Sampdoria',
                                                                         'Villarreal CF',
                                                                         'RSC Anderlecht',
                                                                         'Hertha BSC',
                                                                         'Vissel Kobe',
                                                                         'Cruzeiro',
                                                                         'PSV',
                                                                         'Levante UD',
                                                                         'Athletic Club de Bilbao',
                                                                         'Deportivo Alavés',
                                                                         'Atlanta United',
                                                                         'Beijing Sinobo Guoan FC',
                                                                         'PFC CSKA Moscow',
                                                                         'Shanghai Greenland Shenhua FC',
                                                                         'Shakhtar Donetsk',
                                                                         'Brescia',
                                                                         'Al Nassr',
                                                                         'Fiorentina',
                                                                         'Boca Juniors',
                                                                         'Fluminense',
                                                                         'Montpellier HSC',
                                                                         'Lokomotiv Moscow',
                                                                         'Watford',
                                                                         'Bournemouth',
                                                                         'Guangzhou R&F FC',
                                                                         '1. FC Köln',
                                                                         'Real Valladolid CF',
                                                                         'UD Las Palmas',
                                                                         'Beşiktaş JK',
                                                                         'Al Hilal',
                                                                         'Chicago Fire',
                                                                         'LOSC Lille',
                                                                         'FC Girondins de Bordeaux',
                                                                         'Sassuolo',
                                                                         'Racing Club',
                                                                         'Kasimpaşa SK',
                                                                         'Dinamo Zagreb',
                                                                         'RCD Espanyol',
                                                                         'Newcastle United',
                                                                         'SD Eibar',
                                                                         'OGC Nice',
                                                                         'River Plate',
                                                                         'FC Schalke 04',
                                                                         'Toronto FC',
                                                                         'Feyenoord',
                                                                         'Club Brugge KV',
                                                                         'Brighton & Hove Albion',
                                                                         'Norwich City',
                                                                         'Olympiacos CFP',
                                                                         'Montreal Impact',
                                                                         'Aston Villa',
                                                                         'Tigres U.A.N.L.',
                                                                         'Hebei China Fortune FC',
                                                                         'Orlando City SC',
                                                                         'DC United',
                                                                         'Dynamo Kyiv',
                                                                         'SK Slavia Praha',
                                                                         'Stade Rennais FC',
                                                                         'FC Nantes',
                                                                         'Santos',
                                                                         'Internacional',
                                                                         'CSA - AL',
                                                                         'KRC Genk',
                                                                         'Shenzhen FC',
                                                                         'SC Braga',
                                                                         'Spartak Moscow',
                                                                         'Wuhan Zall',
                                                                         'Southampton',
                                                                         'CD Leganés',
                                                                         'RC Strasbourg Alsace',
                                                                         'Burnley',
                                                                         'Real Zaragoza',
                                                                         'Girona FC',
                                                                         'Toulouse Football Club',
                                                                         'Genoa',
                                                                         'Portland Timbers',
                                                                         'KAA Gent',
                                                                         '1. FSV Mainz 05',
                                                                         'Independiente',
                                                                         'Al Ahli',
                                                                         'Angers SCO',
                                                                         'Sivasspor',
                                                                         'Fulham',
                                                                         'Club Atlético Talleres',
                                                                         'Udinese',
                                                                         'Independiente Medellín',
                                                                         'Sparta Praha',
                                                                         'SC Freiburg',
                                                                         'Godoy Cruz',
                                                                         'FC Augsburg',
                                                                         'Seattle Sounders FC',
                                                                         'Royal Antwerp FC',
                                                                         'Gamba Osaka',
                                                                         'Club América',
                                                                         'Parma',
                                                                         'Bologna',
                                                                         '1. FC Union Berlin',
                                                                         'Tianjin TEDA FC',
                                                                         'Hannover 96',
                                                                         'Shandong Luneng TaiShan FC',
                                                                         'Chongqing Dangdai Lifan FC SWM Team',
                                                                         'New England Revolution',
                                                                         'AEK Athens',
                                                                         'Stoke City',
                                                                         'Atlético de San Luis',
                                                                         'Monterrey',
                                                                         'Hellas Verona',
                                                                         'PAOK',
                                                                         'Gençlerbirliği SK',
                                                                         'Nagoya Grampus',
                                                                         'Amiens SC',
                                                                         'Club Atlas',
                                                                         'Club Atlético Lanús',
                                                                         'CD Tondela',
                                                                         'Vitória Guimarães',
                                                                         'Botafogo',
                                                                         'SPAL',
                                                                         'Club Atlético Colón',
                                                                         'Nîmes Olympique',
                                                                         'Cruz Azul',
                                                                         'Club Atlético Banfield',
                                                                         'FC Red Bull Salzburg',
                                                                         'AZ Alkmaar',
                                                                         'Fortuna Düsseldorf',
                                                                         'Celtic',
                                                                         'FC København',
                                                                         'Club Tijuana',
                                                                         'Al Ittihad',
                                                                         'Standard de Liège',
                                                                         'FC Utrecht',
                                                                         'Al Taawoun',
                                                                         'Helsingborgs IF',
                                                                         'Atiker Konyaspor',
                                                                         'Portimonense SC',
                                                                         'Rayo Vallecano',
                                                                         'VfB Stuttgart',
                                                                         'Junior FC',
                                                                         'Kayserispor',
                                                                         'RCD Mallorca',
                                                                         'Perth Glory',
                                                                         'West Bromwich Albion',
                                                                         'Granada CF',
                                                                         'Club León',
                                                                         'Astra Giurgiu',
                                                                         'Bahia',
                                                                         "Newell's Old Boys",
                                                                         'Western United FC',
                                                                         'Pachuca',
                                                                         'New York City FC',
                                                                         'FC Basel 1893',
                                                                         'Göztepe SK',
                                                                         'FC Groningen',
                                                                         'Philadelphia Union',
                                                                         'Trabzonspor',
                                                                         'Rangers FC',
                                                                         'New York Red Bulls',
                                                                         'BSC Young Boys',
                                                                         'Fortaleza',
                                                                         'Leeds United',
                                                                         'Cardiff City',
                                                                         'Unión de Santa Fe',
                                                                         'Brentford',
                                                                         'Melbourne Victory',
                                                                         'Sheffield United',
                                                                         'Stade de Reims',
                                                                         'Hamburger SV',
                                                                         'CA Osasuna',
                                                                         'Deportivo Toluca',
                                                                         'Atlético Paranaense',
                                                                         'San Lorenzo de Almagro',
                                                                         'Kawasaki Frontale',
                                                                         'Deportivo de La Coruña',
                                                                         'Swansea City',
                                                                         'Guadalajara',
                                                                         'Vancouver Whitecaps FC',
                                                                         'Ettifaq FC',
                                                                         'Goiás',
                                                                         'Santos Laguna',
                                                                         'Avaí FC',
                                                                         'Real Salt Lake',
                                                                         'Vélez Sarsfield',
                                                                         'Rosenborg BK',
                                                                         'Racing Club de Lens',
                                                                         'FC Metz',
                                                                         'FC Sion',
                                                                         'Gazişehir Gaziantep F.K.',
                                                                         'Sydney FC',
                                                                         'Sporting Kansas City',
                                                                         'Málaga CF',
                                                                         'Bristol City',
                                                                         'Nottingham Forest',
                                                                         'CD Tenerife',
                                                                         'Moreirense FC',
                                                                         'Kaizer Chiefs',
                                                                         'Birmingham City',
                                                                         'Lecce',
                                                                         'Colo-Colo',
                                                                         'Viktoria Plzeň',
                                                                         'Al Fateh',
                                                                         'Universidad Católica',
                                                                         'Chievo Verona',
                                                                         'Tianjin Quanjian FC',
                                                                         'Minnesota United FC',
                                                                         'Alanyaspor',
                                                                         'Querétaro',
                                                                         'Hull City',
                                                                         'Denizlispor',
                                                                         '1. FC Nürnberg',
                                                                         'Aalborg BK',
                                                                         'Deportivo Cali',
                                                                         'Chapecoense',
                                                                         'Wisła Kraków',
                                                                         'FC Midtjylland',
                                                                         'Famalicão',
                                                                         'Clube Sport Marítimo',
                                                                         'Blackburn Rovers',
                                                                         'Columbus Crew SC',
                                                                         'Atlético Nacional',
                                                                         'Huddersfield Town',
                                                                         'MKE Ankaragücü',
                                                                         'Preston North End',
                                                                         'CD Aves',
                                                                         'Gimnasia y Esgrima La Plata',
                                                                         'Daegu FC',
                                                                         'Houston Dynamo',
                                                                         'Molde FK',
                                                                         'Middlesbrough',
                                                                         'Atlético Tucumán',
                                                                         'Al Ain FC',
                                                                         'Al Wehda',
                                                                         'Yeni Malatyaspor',
                                                                         '1. FC Heidenheim 1846',
                                                                         'Dijon FCO',
                                                                         'KSV Cercle Brugge',
                                                                         'FCSB (Steaua)',
                                                                         'SD Huesca',
                                                                         'Neuchâtel Xamax',
                                                                         'Sporting de Charleroi',
                                                                         'Santa Clara',
                                                                         'LASK Linz',
                                                                         'Cádiz CF',
                                                                         'FC Tokyo',
                                                                         'Puebla FC',
                                                                         'Estudiantes de La Plata',
                                                                         'SC Heerenveen',
                                                                         'Ceará Sporting Club',
                                                                         'Boavista FC',
                                                                         'Antalyaspor',
                                                                         'KAS Eupen',
                                                                         'Crotone',
                                                                         'Unión Magdalena',
                                                                         'U.N.A.M.',
                                                                         'Panathinaikos FC',
                                                                         'Real Sporting de Gijón',
                                                                         'Argentinos Juniors',
                                                                         'Livorno',
                                                                         'Henan Jianye FC',
                                                                         'Albacete BP',
                                                                         'Çaykur Rizespor',
                                                                         'Club Atlético Huracán',
                                                                         'Frosinone',
                                                                         'AIK',
                                                                         'Urawa Red Diamonds',
                                                                         'Malmö FF',
                                                                         'Rosario Central',
                                                                         'FC Juárez',
                                                                         'Stade Brestois 29',
                                                                         'Sheffield Wednesday',
                                                                         'Jeonbuk Hyundai Motors',
                                                                         'Reading',
                                                                         'Empoli',
                                                                         'DSC Arminia Bielefeld',
                                                                         'Rio Ave FC',
                                                                         'Colorado Rapids',
                                                                         'Western Sydney Wanderers',
                                                                         'Monarcas Morelia',
                                                                         'Benevento',
                                                                         'UD Almería',
                                                                         'Vitesse',
                                                                         'SV Sandhausen',
                                                                         'Royal Excel Mouscron',
                                                                         'Al Shabab',
                                                                         'Shimizu S-Pulse',
                                                                         'Os Belenenses',
                                                                         'Cúcuta Deportivo',
                                                                         'Real Oviedo',
                                                                         'Legia Warszawa',
                                                                         'CD Everton de Viña del Mar',
                                                                         'Club Necaxa',
                                                                         'CFR Cluj',
                                                                         'La Equidad',
                                                                         'Djurgårdens IF',
                                                                         'Derby County',
                                                                         'Elche CF',
                                                                         'Yokohama F. Marinos',
                                                                         'Sagan Tosu',
                                                                         'FC Dallas',
                                                                         'SK Rapid Wien',
                                                                         'Club Atlético Aldosivi',
                                                                         'Atlético Bucaramanga',
                                                                         'San Jose Earthquakes',
                                                                         'Pescara',
                                                                         'FK Austria Wien',
                                                                         'Aberdeen',
                                                                         'Piast Gliwice',
                                                                         'Brøndby IF',
                                                                         'FC Twente',
                                                                         'FC St. Pauli',
                                                                         'FC Lorient',
                                                                         'Millonarios FC',
                                                                         'Paris FC',
                                                                         'Heart of Midlothian',
                                                                         'Deportes Tolima',
                                                                         'Coquimbo Unido',
                                                                         'BK Häcken',
                                                                         'Beijing Renhe FC',
                                                                         'Kashima Antlers',
                                                                         'SK Brann',
                                                                         'Universitatea Craiova',
                                                                         'VfL Bochum 1848',
                                                                         'En Avant de Guingamp',
                                                                         'Defensa y Justicia',
                                                                         'América de Cali',
                                                                         'Holstein Kiel',
                                                                         'Lechia Gdańsk',
                                                                         'FC Cincinnati',
                                                                         'Sunderland',
                                                                         'Al Fayha',
                                                                         'Perugia',
                                                                         'FC Seoul',
                                                                         'Deportes Iquique',
                                                                         'KV Kortrijk',
                                                                         'FC Viitorul',
                                                                         'Vitória de Setúbal',
                                                                         'Charlton Athletic',
                                                                         'Ulsan Hyundai FC',
                                                                         'Hammarby IF',
                                                                         'Queens Park Rangers',
                                                                         'Arka Gdynia',
                                                                         'IFK Norrköping',
                                                                         'SG Dynamo Dresden',
                                                                         'Cerezo Osaka',
                                                                         'Al Raed',
                                                                         'FC Lugano',
                                                                         'US Salernitana 1919',
                                                                         'Lech Poznań',
                                                                         'Sint-Truidense VV',
                                                                         'Pordenone',
                                                                         'US Cremonese',
                                                                         'SC Paderborn 07',
                                                                         'Central Córdoba',
                                                                         'AD Alcorcón',
                                                                         'Hokkaido Consadole Sapporo',
                                                                         'Stade Malherbe Caen',
                                                                         'Górnik Zabrze',
                                                                         'Gyeongnam FC',
                                                                         'Cittadella',
                                                                         'Odense Boldklub',
                                                                         'FC Zürich',
                                                                         'SV Zulte-Waregem',
                                                                         'Spezia',
                                                                         'KV Mechelen',
                                                                         'CD Palestino',
                                                                         'ESTAC Troyes',
                                                                         'Servette FC',
                                                                         'Patronato',
                                                                         'Universidad de Chile',
                                                                         'SV Darmstadt 98',
                                                                         'Arsenal de Sarandí',
                                                                         'Jagiellonia Białystok',
                                                                         'FC Luzern',
                                                                         'Valenciennes FC',
                                                                         'KV Oostende',
                                                                         'FC Thun',
                                                                         'Kalmar FF',
                                                                         'Suwon Samsung Bluewings',
                                                                         'AJ Auxerre',
                                                                         'FC Paços de Ferreira',
                                                                         'Once Caldas',
                                                                         ' SSV Jahn Regensburg',
                                                                         'Vegalta Sendai',
                                                                         'FC Nordsjælland',
                                                                         'Fortuna Sittard',
                                                                         'CD Lugo',
                                                                         'Virtus Entella',
                                                                         'ADO Den Haag',
                                                                         'FC Erzgebirge Aue',
                                                                         'Dinamo Bucureşti',
                                                                         'CD Mirandés',
                                                                         'FC Emmen',
                                                                         'Millwall',
                                                                         'Extremadura UD',
                                                                         'Wolfsberger AC',
                                                                         'CD Antofagasta',
                                                                         'KFC Uerdingen 05',
                                                                         'Barnsley',
                                                                         'Al Hazem',
                                                                         'PEC Zwolle',
                                                                         'Heracles Almelo',
                                                                         'Melbourne City FC',
                                                                         'Le Havre AC',
                                                                         'Willem II',
                                                                         'Sanfrecce Hiroshima',
                                                                         'Cracovia',
                                                                         'SK Sturm Graz',
                                                                         'Gil Vicente FC',
                                                                         'Kilmarnock',
                                                                         'Alianza Petrolera',
                                                                         'Independiente Santa Fe',
                                                                         'Seongnam FC',
                                                                         'SpVgg Greuther Fürth',
                                                                         'Randers FC',
                                                                         'Ascoli',
                                                                         'Al Faisaly',
                                                                         'Damac FC',
                                                                         'Cosenza',
                                                                         'Chamois Niortais Football Club',
                                                                         'Wigan Athletic',
                                                                         'Deportivo Pasto',
                                                                         'Pohang Steelers',
                                                                         'Peterborough United',
                                                                         'Tiburones Rojos de Veracruz',
                                                                         'Venezia FC',
                                                                         'AS Nancy Lorraine',
                                                                         'Jeju United FC',
                                                                         'Karlsruher SC',
                                                                         'Jaguares de Córdoba',
                                                                         'GIF Sundsvall',
                                                                         'Clermont Foot 63',
                                                                         'Pogoń Szczecin',
                                                                         'Newcastle Jets',
                                                                         'Waasland-Beveren',
                                                                         'Wycombe Wanderers',
                                                                         'Unión La Calera',
                                                                         'Kristiansund BK',
                                                                         'Matsumoto Yamaga',
                                                                         'Racing Santander',
                                                                         'Central Coast Mariners',
                                                                         'AC Ajaccio',
                                                                         'Pisa',
                                                                         'Hibernian',
                                                                         'Gangwon FC',
                                                                         'IFK Göteborg',
                                                                         'Castellammare di Stabia',
                                                                         'CD Numancia',
                                                                         'Envigado FC',
                                                                         'Rionegro Águilas',
                                                                         'SV Wehen Wiesbaden',
                                                                         'VVV-Venlo',
                                                                         'FC Ingolstadt 04',
                                                                         'CD Universidad de Concepción',
                                                                         'Atlético Huila',
                                                                         'Fleetwood Town',
                                                                         'FC Sochaux-Montbéliard',
                                                                         'Júbilo Iwata',
                                                                         'Abha Club',
                                                                         'Patriotas Boyacá FC',
                                                                         'Sarpsborg 08 FF',
                                                                         "CD O'Higgins",
                                                                         'SpVgg Unterhaching',
                                                                         'Unión Española',
                                                                         'VfL Osnabrück',
                                                                         'Luton Town',
                                                                         'Vålerenga Fotball',
                                                                         'Audax Italiano',
                                                                         'Zagłębie Lubin',
                                                                         'Incheon United FC',
                                                                         'Lillestrøm SK',
                                                                         'IF Elfsborg',
                                                                         'Orlando Pirates',
                                                                         'Motherwell',
                                                                         'CF Fuenlabrada',
                                                                         'Sparta Rotterdam',
                                                                         'SD Ponferradina',
                                                                         'Falkenbergs FF',
                                                                         'Brisbane Roar',
                                                                         'Gaz Metan Mediaş',
                                                                         'FC Admira Wacker Mödling',
                                                                         'Doncaster Rovers',
                                                                         'St. Johnstone FC',
                                                                         'Portsmouth',
                                                                         'Aarhus GF',
                                                                         'Wellington Phoenix',
                                                                         'SønderjyskE',
                                                                         'Silkeborg IF',
                                                                         'Curicó Unido',
                                                                         'Dundalk',
                                                                         '1. FC Kaiserslautern',
                                                                         'FSV Zwickau',
                                                                         'La Berrichonne de Châteauroux',
                                                                         'Wisła Płock',
                                                                         'Bolton Wanderers',
                                                                         'Lincoln City',
                                                                         '1. FC Magdeburg',
                                                                         'Eintracht Braunschweig',
                                                                         'Shamrock Rovers',
                                                                         'Shonan Bellmare',
                                                                         'Le Mans FC',
                                                                         'CD Huachipato',
                                                                         'Hallescher FC',
                                                                         'SKN St. Pölten',
                                                                         'Korona Kielce',
                                                                         'CD Cobresal',
                                                                         'Ipswich Town',
                                                                         'Strømsgodset IF',
                                                                         'FC St. Gallen',
                                                                         'Sepsi OSK',
                                                                         'Bayern München II',
                                                                         'Trapani',
                                                                         'FC Botoşani',
                                                                         'HJK Helsinki',
                                                                         'Odds BK',
                                                                         'Grenoble Foot 38',
                                                                         'FC Hansa Rostock',
                                                                         'Oxford United',
                                                                         'RKC Waalwijk',
                                                                         'FK Bodø/Glimt',
                                                                         'Politehnica Iaşi',
                                                                         'Shrewsbury',
                                                                         'Śląsk Wrocław',
                                                                         'Tromsø IL',
                                                                         'Hobro IK',
                                                                         'SV Mattersburg',
                                                                         'Adelaide United',
                                                                         'WSG Tirol',
                                                                         'IK Sirius',
                                                                         'Coventry City',
                                                                         'MSV Duisburg',
                                                                         'Rotherham United',
                                                                         'FC Würzburger Kickers',
                                                                         'LKS Lodz',
                                                                         'Oldham Athletic',
                                                                         'Burton Albion',
                                                                         'TSV Hartberg',
                                                                         'TSV 1860 München',
                                                                         'Ranheim Fotball',
                                                                         'Örebro SK',
                                                                         'SG Sonnenhof Großaspach',
                                                                         'Salford City',
                                                                         'FC Chambly Oise',
                                                                         'Blackpool',
                                                                         'FC Hermannstadt',
                                                                         'SCR Altach',
                                                                         'Milton Keynes Dons',
                                                                         'FC Voluntari',
                                                                         'Southend United',
                                                                         'AC Horsens',
                                                                         'Stabæk Fotball',
                                                                         'Al Adalah',
                                                                         'FK Haugesund',
                                                                         'Sangju Sangmu FC',
                                                                         'Esbjerg fB',
                                                                         'Viking FK',
                                                                         'Östersunds FK',
                                                                         'SV Meppen',
                                                                         'Bradford City',
                                                                         'US Orléans Loiret Football',
                                                                         'Bristol Rovers',
                                                                         'Mansfield Town',
                                                                         'Rochdale',
                                                                         'St. Mirren',
                                                                         'SV Waldhof Mannheim',
                                                                         'Livingston FC',
                                                                         'Oita Trinita',
                                                                         'Accrington Stanley',
                                                                         'Rodez Aveyron Football',
                                                                         'Scunthorpe United',
                                                                         'SC Preußen Münster',
                                                                         'Stevenage',
                                                                         'Colchester United',
                                                                         'Lyngby BK',
                                                                         'Plymouth Argyle',
                                                                         'FC Carl Zeiss Jena',
                                                                         'Viktoria Köln',
                                                                         'Swindon Town',
                                                                         'Grimsby Town',
                                                                         'Northampton Town',
                                                                         'Raków Częstochowa',
                                                                         'Exeter City',
                                                                         'Gillingham',
                                                                         'Mjøndalen IF',
                                                                         'Chemnitzer FC',
                                                                         'Chindia Târgovişte',
                                                                         'Hamilton Academical FC',
                                                                         'Port Vale',
                                                                         'Tranmere Rovers',
                                                                         'Crawley Town',
                                                                         'Forest Green Rovers',
                                                                         'Walsall',
                                                                         'Carlisle United',
                                                                         'Cheltenham Town',
                                                                         'AFC Wimbledon',
                                                                         'Cambridge United',
                                                                         'Newport County',
                                                                         'Morecambe',
                                                                         'AFC Eskilstuna',
                                                                         'Ross County FC',
                                                                         'Crewe Alexandra',
                                                                         'Academica Clinceni',
                                                                         'Macclesfield Town',
                                                                         'Leyton Orient',
                                                                         'Cork City',
                                                                         "St. Patrick's Athletic",
                                                                         'Bohemian FC',
                                                                         'Waterford FC',
                                                                         'Sligo Rovers',
                                                                         'Derry City',
                                                                         'Bury',
                                                                         'Finn Harps',
                                                                         'UCD AFC'])

    numeric_variables = ['Age', 'SHO', 'PAS', 'DRI', 'DEF', 'PHY', 'PAC']
    categorical_variables = ['position_fe','Club']
    modelo_path = Path(__file__).parents[0] / 'files/model_XGB.sav'
    loaded_model = pickle.load(open(modelo_path, 'rb'))
    data = [age, position_fe, IR, SHO, PAS, DRI, DEF, PHY, PAC, Club]
    df_model = pd.DataFrame([data], columns = ['Age','position_fe','IR','SHO', 'PAS', 'DRI', 'DEF', 'PHY', 'PAC', 'Club'])
    st.subheader('Predicción del precio / Price prediction: ')
    float_formatter = "{:,.2f} €".format
    price = np.exp(loaded_model.predict(df_model))
    st.write(float_formatter(price[0]))
